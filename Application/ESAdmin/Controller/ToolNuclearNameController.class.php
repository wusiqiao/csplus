<?php

namespace ESAdmin\Controller;
use Common\Lib\Controller\DataController;

class ToolNuclearNameController extends DataController{

    protected function _before_list(&$list)
    {
        parent::_before_list($list); // TODO: Change the autogenerated stub
        foreach($list as $key=>$val){
            $value = json_decode($val['value'],true);
            $list[$key]['city'] = $value['city'];//城市
            $list[$key]['firm'] = $value['firm'];//字号
            $list[$key]['trade'] = $value['trade'];//行业
            $list[$key]['form'] = $value['form'];
        }
    }
    protected function _before_detail(&$data)
    {
        parent::_before_detail($data); // TODO: Change the autogenerated stub
        $value = json_decode($data['value'],true);
        $data['city'] = $value['city'];//城市
        $data['firm'] = $value['firm'];//字号
        $data['trade'] = $value['trade'];//行业
        $data['form'] = $value['form'];
        if ($data['is_process'] == 1){
            $data['processed_at'] = date('Y年m月d日 H:i',$data['processed_at']);
        }
    }
}
